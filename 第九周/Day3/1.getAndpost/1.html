<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h3>nihao</h3>
<button id="getAll">获取所有</button>
<button id="get">获取单个</button>


<br>
<button id="post">发送post请求</button>
<script type="text/javascript">

    // '/getUser' get 请求方式查询单个id=1 不传id 默认 获取所有
    //   '/getUser' post 请求增加
    let data = {say: 'nihao', hi: 'hello'};
    let api = '/getUser?';
    getAll.onclick = function () {
        request('GET', api);
    };
    post.onclick = function () {
        request(this.id, api, data);
    };

    // url? id=24&sau=nihao
   function request(method, url, data) {
       let xhr = new XMLHttpRequest();
       
       if(/get/ig.test(method)) { // get 请求拼接数据 是否有？ &链接问题
          for(let k in data) {
              if(data.hasOwnProperty(k)) {
                  if(url.indexOf('?')>-1){
                      url += `${k}=${data[k]}&`;
                  } else {
                      url += `?${k}=${data[k]}`;
                  }
              }
          }
          url = url.slice(0, -1);
       }
       
       xhr.open(method, url);
       xhr.responseType = 'json';
       xhr.onreadystatechange = function () {
           if(this.readyState === 4 && /^2\d{2}$/g.test(this.status)) {
               console.log(this.response);
           }
       };
       xhr.send(JSON.stringify(data));
   }
   
   
   
</script>
</body>
</html>